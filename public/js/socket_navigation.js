// Generated by CoffeeScript 1.6.3
var SocketNavigation;

SocketNavigation = (function() {
  function SocketNavigation() {
    var http_address, port, socket,
      _this = this;
    this.events = {};
    if (location.port) {
      port = ":" + location.port;
    }
    http_address = location.protocol + '//' + location.hostname + port;
    socket = io.connect(http_address);
    socket.on('controll', function(data) {
      var listener, _i, _len, _ref, _results;
      console.log(data);
      _ref = _this.events[data.action];
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        listener = _ref[_i];
        _results.push(listener());
      }
      return _results;
    });
  }

  SocketNavigation.prototype.on = function(eventName, callback) {
    if (!Array.isArray(this.events[eventName])) {
      this.events[eventName] = [];
    }
    return this.events[eventName].push(callback);
  };

  return SocketNavigation;

})();
